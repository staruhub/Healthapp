## Context

Health Tracker App 当前使用 shadcn/ui 组件库和 Tailwind CSS 4，已有基础的紫色健康主题。用户提出了一套完整的设计风格规范，定位为"柔和新拟态 + 卡片式布局"，目标是营造清新、舒适、无压力的用户体验。

### 设计理念
- **风格定位**: 柔和新拟态（Soft Neomorphism）+ 卡片式布局
- **情感目标**: 清新、舒适、无压力、轻松愉悦
- **目标用户**: 注重生活品质、追求健康生活方式的用户群体

## Goals / Non-Goals

### Goals
- 实施莫兰迪低饱和度色彩系统，降低视觉压力
- 建立统一的排版规范和间距系统
- 优化卡片组件的圆角和阴影效果
- 为环形进度图和成就徽章定义组件规范
- 统一动效过渡和交互反馈

### Non-Goals
- 不改变应用的功能逻辑
- 不重构组件的 React 代码结构
- 不添加新的 UI 组件库依赖
- 不实现深色模式的完全重新设计（保持现有深色模式基础）

## Decisions

### 1. 色彩系统采用莫兰迪色系
**决定**: 使用低饱和度的莫兰迪色系（薄荷绿、淡紫、米黄、奶油白）
**原因**: 低饱和度色彩减少视觉疲劳，更符合健康应用的舒适定位

**配色方案**:
| 名称 | 色值 | 用途 |
|------|------|------|
| 薄荷绿 | `#C5DDD6` | 主要功能卡片背景 |
| 淡紫色 | `#E8DFF0` | 次要卡片背景 |
| 米黄色 | `#E8E4C8` | 强调卡片背景 |
| 奶油白 | `#FAF8F5` | 页面主背景 |
| 成功绿 | `#7CB69D` | 进度完成、正向反馈 |
| 强调紫 | `#9B7BB8` | 环形图表、数据可视化 |

### 2. 圆角系统升级
**决定**: 卡片圆角从 20px 升级到 24-28px
**原因**: 更大的圆角增强柔和感，符合新拟态设计语言

### 3. 阴影系统简化
**决定**: 采用统一的柔和阴影 `0 4px 20px rgba(0, 0, 0, 0.05)`
**原因**: 轻柔、扩散范围大、透明度低的阴影增强层次感但不显得厚重

### 4. 保留 CSS 变量架构
**决定**: 继续使用 CSS 变量系统，通过修改变量值实现主题切换
**原因**: 利用现有 shadcn/ui 架构，无需大规模重构组件代码

**替代方案**: 使用 Tailwind 主题扩展
**拒绝原因**: shadcn/ui 已经基于 CSS 变量，切换方案增加复杂度

### 5. 深色模式策略
**决定**: 仅调整色调以保持莫兰迪风格，不完全重新设计深色模式
**原因**:
- 保持现有深色模式基础结构，降低实施复杂度
- 通过调整为低饱和度色调即可达到莫兰迪风格一致性
- 避免大规模重构带来的回归风险

**替代方案**: 完全重新设计深色模式
**拒绝原因**: 工作量过大，且现有深色模式结构可复用

### 6. 环形进度图使用 SVG 实现
**决定**: 使用 SVG 实现环形进度图组件
**原因**:
- SVG 提供精确的路径控制和动画能力
- 更好的跨浏览器兼容性
- 支持复杂的渐变和动画效果
- 易于实现圆角端点（stroke-linecap: round）

**替代方案**: 使用纯 CSS 实现（conic-gradient）
**拒绝原因**: CSS 实现在圆角端点和动画控制上能力有限

### 7. Recharts 图表配色同步更新
**决定**: 同步更新 Recharts 图表库的配色方案，使用设计规范中定义的 wellness 配色
**原因**:
- 保持整体视觉一致性
- 图表是数据可视化的核心，配色需与设计系统统一
- 通过 CSS 变量实现，便于主题切换

**配色映射**:
| CSS 变量 | 色值 | 用途 |
|----------|------|------|
| --chart-1 | `#7CB69D` | 步行/成功 |
| --chart-2 | `#9B7BB8` | 卡路里/强调 |
| --chart-3 | `#C4B896` | 距离/中性 |
| --chart-4 | `#E8A0A0` | 心率/警告 |
| --chart-5 | `#A8C5D9` | 辅助数据 |

## Risks / Trade-offs

### 风险 1: 色彩变化可能影响可访问性
**缓解**: 
- 保持文字色与背景色的对比度符合 WCAG AA 标准
- 深灰 `#2D2D2D` 与奶油白 `#FAF8F5` 对比度 > 7:1

### 风险 2: 圆角变化可能导致布局问题
**缓解**:
- 渐进式验证每个页面的视觉效果
- 为特殊组件保留覆盖能力

### 风险 3: 深色模式协调
**缓解**:
- 同步更新深色模式的配色方案
- 保持深色模式的莫兰迪色调

## Migration Plan

### 阶段 1: 核心样式迁移
1. 更新 `globals.css` 中的 CSS 变量
2. 验证基础组件（Button, Card, Input）的视觉效果
3. 确保无 CSS 编译错误

### 阶段 2: 页面验证
1. 验证 Dashboard 页面
2. 验证 Food Log 页面
3. 验证 Body Tracking 页面
4. 验证 Insights 页面
5. 验证 Chat 页面

### 阶段 3: 深色模式
1. 更新深色模式 CSS 变量
2. 验证深色模式下所有页面

### 阶段 4: 进阶组件
1. 实现环形进度图样式
2. 实现成就徽章样式

### 回滚方案
- `globals.css.backup` 已存在，可快速回滚
- Git 版本控制支持任意提交回滚

## Resolved Questions

1. ✅ **深色模式**: 仅调整色调以保持莫兰迪风格（Decision #5）
2. ✅ **环形进度图**: 使用 SVG 实现（Decision #6）
3. ✅ **图表库**: Recharts 配色需要同步更新（Decision #7）

